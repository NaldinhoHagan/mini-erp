<%- include('../partials/head', { title }) %>
<%- include('../partials/nav') %>
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Produtos</h1>
  <a class="btn btn-primary" href="/products/new">Novo</a>
</div>
<form class="mb-3" method="get">
  <div class="input-group">
    <input class="form-control" placeholder="Buscar" name="q" value="<%= q %>">
    <button class="btn btn-outline-secondary">Buscar</button>
  </div>
</form>
<table class="table table-striped">
  <thead><tr><th>ID</th><th>Nome</th><th>Pre√ßo</th><th>Estoque</th><th></th></tr></thead>
  <tbody>
    <% products.forEach(p => { %>
      <tr>
        <td><%= p.id %></td>
        <td><%= p.name %></td>
        <td>R$ <%= p.price.toFixed(2) %></td>
        <td><%= p.stock %></td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" href="/products/<%= p.id %>/edit">Editar</a>
          <form method="post" action="/products/<%= p.id %>/delete" class="d-inline">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <button class="btn btn-sm btn-outline-danger" onclick="return confirm('Excluir?')">Excluir</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
</div>
</body></html>
